import{produtos as e}from"./products.js";function limitarDigitos(e){return e.toString().length>5?e.toString().slice(0,5):e}function displayItems(){let t=document.getElementById("iphone"),a=document.getElementById("Mac"),i=e.filter(e=>"iphone"==e.category);i.map(e=>{var a=document.createElement("div");a.setAttribute("id","item-card");var i=document.createElement("img");i.src=e.img;var r=document.createElement("div");r.setAttribute("id","card-top");var n=document.createElement("button");n.setAttribute("class","add-to-cart"),n.setAttribute("id",e.id),n.innerText="Comprar",r.appendChild(n);var c=document.createElement("p");c.setAttribute("id","item-name"),c.innerText=e.nome;var d=document.createElement("p");d.setAttribute("id","item-price"),d.innerText="A partir de R$ "+e.price,a.appendChild(r),a.appendChild(i),a.appendChild(c),a.appendChild(d),t.appendChild(a)});let r=e.filter(e=>"Mac"==e.category);r.map(e=>{var t=document.createElement("div");t.setAttribute("id","item-card");var i=document.createElement("img");i.src=e.img;var r=document.createElement("div");r.setAttribute("id","card-top");var n=document.createElement("button");n.setAttribute("class","add-to-cart"),n.setAttribute("id",e.id),n.innerText="Comprar",r.appendChild(n);var c=document.createElement("p");c.setAttribute("id","item-name"),c.innerText=e.nome;var d=document.createElement("p");d.setAttribute("id","item-price"),d.innerText="A partir de R$ "+e.price,t.appendChild(r),t.appendChild(i),t.appendChild(c),t.appendChild(d),a.appendChild(t)})}displayItems(),document.querySelectorAll(".add-to-cart").forEach(e=>{e.addEventListener("click",addToCart)});var cartData=[];let testeNomes=[];function addToCart(){var t=this.parentNode.nextSibling.nextSibling.innerText,a=e.find(e=>e.nome==t),i=cartData.indexOf(a);-1===i?(document.getElementById(a.id).classList.add("ativo"),document.getElementById(a.id).innerText="Adicionado",cartData=[...cartData,a]):i>-1&&alert("J\xe1 est\xe1 adicionado ao carrinho!");var r=0;cartData.map(e=>{r+=e.price});let n=r;document.getElementById("total-item").innerText="Total Item: "+cartData.length,document.getElementById("total-price").innerText="Pre\xe7o total: "+limitarDigitos(n)+" R$",document.getElementById("cart-plus").innerText=" "+cartData.length,cartItems()}function cartItems(){let e=document.querySelector(".Comprados");var t=document.getElementById("table-body");t.innerHTML="",cartData.map(e=>{let a=e.price;var i=document.createElement("div");i.setAttribute("class","lista");var r=document.createElement("div"),n=document.createElement("img");n.src=e.img,r.appendChild(n);var c=document.createElement("div");c.setAttribute("class","listaNome"),c.innerText=e.nome;var d=document.createElement("div");d.setAttribute("class","btns");var l=document.createElement("button");l.setAttribute("class","decrease-item"),l.innerText="-";var m=document.createElement("span");m.innerText=e.quantity;var p=document.createElement("button");p.setAttribute("class","increase-item"),p.innerText="+",d.appendChild(l),d.appendChild(m),d.appendChild(p);var o=document.createElement("div");o.setAttribute("class","precoItem"),o.innerText=limitarDigitos(a)+" R$",i.appendChild(r),i.appendChild(c),i.appendChild(d),i.appendChild(o),t.appendChild(i)}),document.querySelectorAll(".increase-item").forEach(e=>{e.addEventListener("click",incrementItem)}),document.querySelectorAll(".decrease-item").forEach(e=>{e.addEventListener("click",decrementItem)}),0==cartData.length&&e.classList.remove("ativo")}function incrementItem(){let e=this.parentNode.previousSibling.innerText;var t=cartData.find(t=>t.nome==e);t.quantity+=1,currPrice=(t.price*t.quantity-t.price*(t.quantity-1))/(t.quantity-1),t.price=currPrice*t.quantity,totalAmount(),cartItems()}var currPrice=0;function decrementItem(){let e=this.parentNode.previousSibling.innerText,t=cartData.find(t=>t.nome==e),a=cartData.indexOf(t);t.quantity>1?(currPrice=(t.price*t.quantity-t.price*(t.quantity-1))/t.quantity,t.quantity-=1,t.price=currPrice*t.quantity):(document.getElementById(t.id).classList.remove("ativo"),document.getElementById(t.id).innerText="Comprar",cartData.splice(a,1),document.getElementById("cart-plus").innerText=" "+cartData.length),totalAmount(),cartItems()}function totalAmount(){var e=0,t=0;cartData.map(a=>{e+=a.price,t+=a.quantity});let a=e;document.getElementById("total-item").innerText="Total Item: "+t,document.getElementById("total-price").innerText="Pre\xe7o total: "+limitarDigitos(a)+" R$"}